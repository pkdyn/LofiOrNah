<!DOCTYPE html> 
<head> 
	<title> 
	Lofi Or Not 
	</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="/static/css/home.css">
	<link rel="icon" href="/static/img/song-96.ico" type="image/x-icon" >
	<style>
		@font-face {
		font-family: 'LofiCottage';
		src: local('LofiCottage'), url(static/fonts/lofi-cottage-regular.ttf) format('truetype');
		}
		body {
		background-image: url('/static/img/modern-lofi.jpg');
  		background-size: 1264px 600px;}
		.button
		{
		background-color: #fa908d;
		padding: 9px 15px;
		cursor: pointer;
		border:none;
		color:  #000;
		font-size: 20px;
		text-shadow: 0px 0.5px 0px #ffffff;
		font-family: 'LofiCottage', cursive;
		border-radius:13px;
		} 
		.button:hover{
    	background-color:#f24d6d;
		}      
		input {
		width: 43%;
		padding: 3px 5px;
		border-radius: 13px;
		border: 3px solid #ffffff;
		font-size: 15px;
		color: #f24d6d;
		font-family: 'LofiCottage';
		text-align: center  
		}
		::placeholder {
  		color: #f24d6d;}
	</style>
</head> 

<body>
	<div class="home"> 
	<p>
	<input type="url"  id="inp" name="SURL" class = "input" placeholder="Paste Spotify song link here " size="40"  required> 
  	</p>
		 
	<!-- button to invoke JS functions and link to show-prediction.html -->
	<button class = "button" type="submit" >
    <a onclick="link_with_args();">Lofi Or Not</a>
	</button>
	
	<script type="text/javascript">
	function getSURL() { 
	// load the Spotify URL value into JS variables 
	inp_string=document.getElementById("inp").value;
	// build complete URL, including Spotify URL, for the result display page
	prefix = "/show-prediction/?"
	window.output = prefix.concat("inp=",inp_string)
	//document.querySelector('.output').textContent = window.output; 
	}  
	var inputBox = document.getElementById('inp');
    inputBox.onkeyup = function(){
        const regex = /^(https:\/\/open\.spotify\.com\/track\/[A-Za-z0-9]+(\?si=[A-Za-z0-9]+)?)$/;
        if (!regex.test(this.value)) {
            this.value = '';
            alert('Invalid Spotify link');
        }
    };
	</script>
	<script>
		function link_with_args(){
		// call getSURL to create the final URL (including input Sotify URL)  
		getSURL();	
		console.log("in link_with_args");
		console.log(window.output);
		if (!document.getElementById("inp").value) {
            alert('Please paste a Spotify song link');
            return;
        }

		// specify the target of the link = the URL generated by getSURL
		window.location.href = window.output;
		}		
	</script>
	</div>
</body> 
</html>	